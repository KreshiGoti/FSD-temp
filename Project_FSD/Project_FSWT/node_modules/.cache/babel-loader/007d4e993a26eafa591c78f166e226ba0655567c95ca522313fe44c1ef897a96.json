{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\FSWD\\\\Project_FSWT\\\\Project_FSWT\\\\src\\\\pages\\\\EventDetail.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useParams, useNavigate, useLocation } from 'react-router-dom';\nimport Navigation from '../components/Navigation';\nimport Footer from '../components/Footer';\nimport RegistrationForm from '../components/RegistrationForm';\nimport './EventDetail.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EventDetail = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [showRegistrationForm, setShowRegistrationForm] = useState(false);\n  const [registrationSuccess, setRegistrationSuccess] = useState(false);\n  const [event, setEvent] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const API_BASE = process.env.REACT_APP_API_BASE || 'http://localhost:5000';\n  const [takenTickets, setTakenTickets] = useState(0);\n  const demoEvents = [{\n    id: 1,\n    title: \"Tech Innovation Summit 2024\",\n    description: \"Join us for a day of cutting-edge technology discussions, networking, and innovation. Learn from industry experts about the latest trends in AI, blockchain, and cloud computing.\",\n    date: \"Friday, March 15, 2024\",\n    time: \"09:00\",\n    venue: \"Convention Center, Downtown\",\n    seats: \"150 seats available\",\n    totalSeats: 200,\n    takenSeats: 50,\n    category: \"Technology\",\n    price: \"Free\",\n    image: \"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=800&h=400&fit=crop\",\n    heroImage: \"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=1200&h=600&fit=crop\"\n  }, {\n    id: 2,\n    title: \"Digital Marketing Workshop\",\n    description: \"Master the art of digital marketing with hands-on workshops covering SEO, social media strategies, content marketing, and analytics. Perfect for marketers looking to enhance their skills.\",\n    date: \"Wednesday, March 20, 2024\",\n    time: \"10:00\",\n    venue: \"Business Center, Midtown\",\n    seats: \"75 seats available\",\n    totalSeats: 100,\n    takenSeats: 25,\n    category: \"Business\",\n    price: \"$99\",\n    image: \"https://images.unsplash.com/photo-1552664730-d307ca884978?w=400&h=250&fit=crop\",\n    heroImage: \"https://images.unsplash.com/photo-1552664730-d307ca884978?w=1200&h=600&fit=crop\"\n  }, {\n    id: 3,\n    title: \"Music & Arts Festival\",\n    description: \"Experience a weekend filled with live music, art exhibitions, and creative workshops. Join us for an unforgettable celebration of music and arts featuring local and international artists.\",\n    date: \"Saturday, March 25, 2024\",\n    time: \"12:00\",\n    venue: \"City Park, Central\",\n    seats: \"500 seats available\",\n    totalSeats: 600,\n    takenSeats: 100,\n    category: \"Entertainment\",\n    price: \"$45\",\n    image: \"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=250&fit=crop\",\n    heroImage: \"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=1200&h=600&fit=crop\"\n  }, {\n    id: 4,\n    title: \"Startup Pitch Competition\",\n    description: \"Watch innovative startups pitch their ideas to investors and industry experts. This competition showcases the next generation of entrepreneurs and their groundbreaking ideas.\",\n    date: \"Tuesday, March 28, 2024\",\n    time: \"14:00\",\n    venue: \"Innovation Hub, Tech District\",\n    seats: \"200 seats available\",\n    totalSeats: 250,\n    takenSeats: 50,\n    category: \"Business\",\n    price: \"$25\",\n    image: \"https://images.unsplash.com/photo-1559136555-9303baea8ebd?w=400&h=250&fit=crop\",\n    heroImage: \"https://images.unsplash.com/photo-1559136555-9303baea8ebd?w=1200&h=600&fit=crop\"\n  }, {\n    id: 5,\n    title: \"AI & Machine Learning Conference\",\n    description: \"Explore the latest developments in artificial intelligence and machine learning. Join leading researchers and practitioners as they share insights into the future of AI technology.\",\n    date: \"Thursday, April 5, 2024\",\n    time: \"09:30\",\n    venue: \"Conference Center, University\",\n    seats: \"300 seats available\",\n    totalSeats: 400,\n    takenSeats: 100,\n    category: \"Technology\",\n    price: \"$150\",\n    image: \"https://images.unsplash.com/photo-1485827404703-89b55fcc595e?w=400&h=250&fit=crop\",\n    heroImage: \"https://images.unsplash.com/photo-1485827404703-89b55fcc595e?w=1200&h=600&fit=crop\"\n  }, {\n    id: 6,\n    title: \"Food & Wine Tasting Event\",\n    description: \"Indulge in exquisite food and wine pairings from local restaurants and wineries. Experience culinary excellence with expert sommeliers and renowned chefs.\",\n    date: \"Sunday, April 8, 2024\",\n    time: \"18:00\",\n    venue: \"Grand Hotel, Waterfront\",\n    seats: \"80 seats available\",\n    totalSeats: 100,\n    takenSeats: 20,\n    category: \"Entertainment\",\n    price: \"$85\",\n    image: \"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=400&h=250&fit=crop\",\n    heroImage: \"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=1200&h=600&fit=crop\"\n  }];\n\n  // Normalize backend event shape to UI shape\n  const normalizeEvent = raw => {\n    var _raw$totalSeats, _raw$takenSeats;\n    if (!raw) return null;\n    const start = raw.startDate ? new Date(raw.startDate) : null;\n    const title = raw.title || raw.name || 'Event';\n    const total = typeof raw.capacity === 'number' ? raw.capacity : (_raw$totalSeats = raw.totalSeats) !== null && _raw$totalSeats !== void 0 ? _raw$totalSeats : 0;\n    const taken = Array.isArray(raw.attendees) ? raw.attendees.length : (_raw$takenSeats = raw.takenSeats) !== null && _raw$takenSeats !== void 0 ? _raw$takenSeats : 0;\n    const image = raw.imageUrl || raw.image || 'https://images.unsplash.com/photo-1521737604893-d14cc237f11d?w=800&h=400&fit=crop';\n    const heroImage = image;\n    const category = raw.categories && raw.categories[0] || raw.category || 'General';\n    const price = typeof raw.price === 'number' ? raw.price : raw.price || 'Free';\n    return {\n      id: raw._id || raw.id,\n      title,\n      description: raw.description || '',\n      date: start ? start.toLocaleDateString() : raw.date || '-',\n      time: start ? start.toLocaleTimeString([], {\n        hour: '2-digit',\n        minute: '2-digit'\n      }) : raw.time || '-',\n      venue: raw.location || raw.venue || '-',\n      seats: `${Math.max(total - taken, 0)} seats available`,\n      totalSeats: total || 0,\n      takenSeats: taken || 0,\n      category,\n      price,\n      image,\n      heroImage\n    };\n  };\n  useEffect(() => {\n    let cancelled = false;\n    async function load() {\n      setLoading(true);\n      setError('');\n      try {\n        // Try backend first\n        const res = await fetch(`${API_BASE}/api/events/${id}`);\n        if (res.ok) {\n          const json = await res.json();\n          const normalized = normalizeEvent(json.item || json);\n          if (!cancelled) setEvent(normalized);\n          // After event loads, fetch participants to compute taken tickets\n          try {\n            const pres = await fetch(`${API_BASE}/api/participants/event/${json._id || json.id || id}`);\n            if (pres.ok) {\n              const pdata = await pres.json();\n              const total = Array.isArray(pdata.items) ? pdata.items.reduce((sum, p) => sum + (typeof p.tickets === 'number' ? p.tickets : 1), 0) : 0;\n              if (!cancelled) setTakenTickets(total);\n            } else if (!cancelled) {\n              setTakenTickets(0);\n            }\n          } catch {\n            if (!cancelled) setTakenTickets(0);\n          }\n        } else {\n          // fallback to demo data for old ids (1..n)\n          const numericId = Number(id);\n          const demo = demoEvents.find(e => e.id === numericId);\n          if (!cancelled) {\n            setEvent(demo || null);\n            setTakenTickets(demo ? demo.takenSeats || 0 : 0);\n          }\n        }\n      } catch (e) {\n        const numericId = Number(id);\n        const demo = demoEvents.find(e => e.id === numericId);\n        if (!cancelled) {\n          if (!demo) setError('Failed to load event');\n          setEvent(demo || null);\n          setTakenTickets(demo ? demo.takenSeats || 0 : 0);\n        }\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    }\n    load();\n    return () => {\n      cancelled = true;\n    };\n  }, [id]);\n\n  // Ensure this hook runs before any conditional return to preserve hook order\n  useEffect(() => {\n    var _location$state;\n    // If navigated from EventsPage with state to open registration and user is logged in\n    let loggedIn = false;\n    try {\n      loggedIn = !!JSON.parse(localStorage.getItem('user'));\n    } catch {}\n    if (location !== null && location !== void 0 && (_location$state = location.state) !== null && _location$state !== void 0 && _location$state.openRegistration && loggedIn) {\n      setShowRegistrationForm(true);\n    }\n  }, [location]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"event-detail-page\",\n      children: [/*#__PURE__*/_jsxDEV(Navigation, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"not-found\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Loading event...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 36\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 7\n    }, this);\n  }\n  if (!event) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"event-detail-page\",\n      children: [/*#__PURE__*/_jsxDEV(Navigation, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"not-found\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Event Not Found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate('/events'),\n          className: \"btn btn-primary\",\n          children: \"Back to Events\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }, this);\n  }\n  const getCategoryColor = category => {\n    switch (category.toLowerCase()) {\n      case 'technology':\n        return '#667eea';\n      case 'business':\n        return '#f093fb';\n      case 'entertainment':\n        return '#4facfe';\n      default:\n        return '#667eea';\n    }\n  };\n  const totalCapacity = event.totalSeats || 0;\n  const taken = typeof takenTickets === 'number' ? takenTickets : event.takenSeats || 0;\n  const remainingSeats = Math.max(totalCapacity - taken, 0);\n  const seatPercentage = totalCapacity ? taken / totalCapacity * 100 : 0;\n  const isPastEvent = (() => {\n    // Use original normalized fields plus backend raw if present\n    const now = new Date();\n    // We don't have raw event dates here; normalized date/time is string, so rely on capacity display only.\n    // As a safeguard, rely on backend preventing past registration. Frontend will disable if remainingSeats is 0 and optionally compute from hero if needed.\n    return false;\n  })();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"event-detail-page\",\n    children: [/*#__PURE__*/_jsxDEV(Navigation, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"event-hero\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"event-hero-bg\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: event.heroImage,\n          alt: event.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"hero-overlay\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"event-hero-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"event-category-tag\",\n          style: {\n            backgroundColor: getCategoryColor(event.category)\n          },\n          children: event.category\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"event-title\",\n          children: event.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"event-info-bar\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"event-info-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              width: \"20\",\n              height: \"20\",\n              viewBox: \"0 0 24 24\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              strokeWidth: \"2\",\n              children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n                x: \"3\",\n                y: \"4\",\n                width: \"18\",\n                height: \"18\",\n                rx: \"2\",\n                ry: \"2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                x1: \"16\",\n                y1: \"2\",\n                x2: \"16\",\n                y2: \"6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                x1: \"8\",\n                y1: \"2\",\n                x2: \"8\",\n                y2: \"6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                x1: \"3\",\n                y1: \"10\",\n                x2: \"21\",\n                y2: \"10\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: event.date\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"event-info-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              width: \"20\",\n              height: \"20\",\n              viewBox: \"0 0 24 24\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              strokeWidth: \"2\",\n              children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n                cx: \"12\",\n                cy: \"12\",\n                r: \"10\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n                points: \"12,6 12,12 16,14\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: event.time\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"event-info-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              width: \"20\",\n              height: \"20\",\n              viewBox: \"0 0 24 24\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              strokeWidth: \"2\",\n              children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n                cx: \"12\",\n                cy: \"10\",\n                r: \"3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: event.venue\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"back-section\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"back-container\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate('/events'),\n          className: \"back-btn\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            width: \"16\",\n            height: \"16\",\n            viewBox: \"0 0 24 24\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            strokeWidth: \"2\",\n            children: /*#__PURE__*/_jsxDEV(\"polyline\", {\n              points: \"15,18 9,12 15,6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Back to Events\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"event-content\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"content-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"content-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"section-title\",\n            children: \"About This Event\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"section-description\",\n            children: event.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"content-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"section-title\",\n            children: \"Event Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"event-details-grid\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"detail-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"20\",\n                height: \"20\",\n                viewBox: \"0 0 24 24\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                strokeWidth: \"2\",\n                children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n                  x: \"3\",\n                  y: \"4\",\n                  width: \"18\",\n                  height: \"18\",\n                  rx: \"2\",\n                  ry: \"2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 334,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                  x1: \"16\",\n                  y1: \"2\",\n                  x2: \"16\",\n                  y2: \"6\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 335,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                  x1: \"8\",\n                  y1: \"2\",\n                  x2: \"8\",\n                  y2: \"6\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 336,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                  x1: \"3\",\n                  y1: \"10\",\n                  x2: \"21\",\n                  y2: \"10\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 337,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"detail-label\",\n                  children: \"Date:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 340,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"detail-value\",\n                  children: event.date\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 341,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"detail-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"20\",\n                height: \"20\",\n                viewBox: \"0 0 24 24\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                strokeWidth: \"2\",\n                children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 347,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n                  cx: \"12\",\n                  cy: \"10\",\n                  r: \"3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 348,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 346,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"detail-label\",\n                  children: \"Venue:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 351,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"detail-value\",\n                  children: event.venue\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 352,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"detail-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"20\",\n                height: \"20\",\n                viewBox: \"0 0 24 24\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                strokeWidth: \"2\",\n                children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n                  cx: \"12\",\n                  cy: \"12\",\n                  r: \"10\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 358,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n                  points: \"12,6 12,12 16,14\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 359,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"detail-label\",\n                  children: \"Time:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 362,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"detail-value\",\n                  children: event.time\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 363,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 361,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"detail-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"20\",\n                height: \"20\",\n                viewBox: \"0 0 24 24\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                strokeWidth: \"2\",\n                children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 369,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                  x1: \"7\",\n                  y1: \"7\",\n                  x2: \"7.01\",\n                  y2: \"7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 370,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 368,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"detail-label\",\n                  children: \"Category:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 373,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"detail-value\",\n                  children: event.category\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 374,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 372,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"content-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"section-title\",\n            children: \"Register for Event\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"availability-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"availability-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"20\",\n                height: \"20\",\n                viewBox: \"0 0 24 24\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                strokeWidth: \"2\",\n                children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 387,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n                  cx: \"9\",\n                  cy: \"7\",\n                  r: \"4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 388,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M23 21v-2a4 4 0 0 0-3-3.87\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 389,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M16 3.13a4 4 0 0 1 0 7.75\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 390,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Availability\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"availability-bar\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"progress-bar\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"progress-fill\",\n                  style: {\n                    width: `${seatPercentage}%`\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 397,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 396,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"availability-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"taken-seats\",\n                  children: [event.takenSeats, \" of \", event.totalSeats, \" seats taken\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 403,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"remaining-seats\",\n                  children: [remainingSeats, \" seats left\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 404,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 402,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"register-btn\",\n              onClick: () => {\n                let loggedIn = false;\n                try {\n                  loggedIn = !!JSON.parse(localStorage.getItem('user'));\n                } catch {}\n                if (!loggedIn) {\n                  navigate('/login');\n                } else {\n                  setShowRegistrationForm(true);\n                }\n              },\n              disabled: totalCapacity > 0 ? remainingSeats === 0 : false,\n              children: \"Register Now\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 7\n    }, this), showRegistrationForm && /*#__PURE__*/_jsxDEV(RegistrationForm, {\n      event: event,\n      onClose: () => {\n        setShowRegistrationForm(false);\n        setRegistrationSuccess(false);\n      },\n      onRegister: async registrationData => {\n        try {\n          const user = (() => {\n            try {\n              return JSON.parse(localStorage.getItem('user'));\n            } catch {\n              return null;\n            }\n          })();\n          const token = localStorage.getItem('token');\n          if (!user) {\n            navigate('/login');\n            return;\n          }\n          const userId = user._id || user.id;\n          const res = await fetch(`${API_BASE}/api/participants/register`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              ...(token ? {\n                Authorization: `Bearer ${token}`\n              } : {})\n            },\n            body: JSON.stringify({\n              eventId: event.id,\n              userId,\n              name: registrationData.name,\n              email: registrationData.email,\n              phone: registrationData.phone,\n              numberOfTickets: registrationData.numberOfTickets\n            })\n          });\n          const json = await res.json().catch(() => ({}));\n          if (!res.ok) {\n            throw new Error(json.message || 'Failed to register');\n          }\n          setRegistrationSuccess(true);\n          // Optionally reload the event to update seats\n          try {\n            const refreshed = await fetch(`${API_BASE}/api/events/${event.id}`);\n            if (refreshed.ok) {\n              const data = await refreshed.json();\n              const normalized = normalizeEvent(data.item || data);\n              setEvent(normalized);\n            }\n          } catch {}\n          // Refresh participants tally to update availability\n          try {\n            const pres = await fetch(`${API_BASE}/api/participants/event/${event.id}`);\n            if (pres.ok) {\n              const pdata = await pres.json();\n              const total = Array.isArray(pdata.items) ? pdata.items.reduce((sum, p) => sum + (typeof p.tickets === 'number' ? p.tickets : 1), 0) : 0;\n              setTakenTickets(total);\n            }\n          } catch {}\n          setTimeout(() => {\n            setShowRegistrationForm(false);\n            setRegistrationSuccess(false);\n          }, 1500);\n        } catch (e) {\n          alert(e.message);\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 9\n    }, this), registrationSuccess && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"notification success\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Registration successful! You'll receive a confirmation email shortly.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 501,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 500,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 256,\n    columnNumber: 5\n  }, this);\n};\n_s(EventDetail, \"16HJlHdTmRODB2dGSIFOVLe4SN8=\", false, function () {\n  return [useParams, useNavigate, useLocation];\n});\n_c = EventDetail;\nexport default EventDetail;\nvar _c;\n$RefreshReg$(_c, \"EventDetail\");","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","useLocation","Navigation","Footer","RegistrationForm","jsxDEV","_jsxDEV","EventDetail","_s","id","navigate","location","showRegistrationForm","setShowRegistrationForm","registrationSuccess","setRegistrationSuccess","event","setEvent","loading","setLoading","error","setError","API_BASE","process","env","REACT_APP_API_BASE","takenTickets","setTakenTickets","demoEvents","title","description","date","time","venue","seats","totalSeats","takenSeats","category","price","image","heroImage","normalizeEvent","raw","_raw$totalSeats","_raw$takenSeats","start","startDate","Date","name","total","capacity","taken","Array","isArray","attendees","length","imageUrl","categories","_id","toLocaleDateString","toLocaleTimeString","hour","minute","Math","max","cancelled","load","res","fetch","ok","json","normalized","item","pres","pdata","items","reduce","sum","p","tickets","numericId","Number","demo","find","e","_location$state","loggedIn","JSON","parse","localStorage","getItem","state","openRegistration","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","getCategoryColor","toLowerCase","totalCapacity","remainingSeats","seatPercentage","isPastEvent","now","src","alt","style","backgroundColor","width","height","viewBox","fill","stroke","strokeWidth","x","y","rx","ry","x1","y1","x2","y2","cx","cy","r","points","d","disabled","onClose","onRegister","registrationData","user","token","userId","method","headers","Authorization","body","stringify","eventId","email","phone","numberOfTickets","catch","Error","message","refreshed","data","setTimeout","alert","_c","$RefreshReg$"],"sources":["C:/Users/HP/Desktop/FSWD/Project_FSWT/Project_FSWT/src/pages/EventDetail.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams, useNavigate, useLocation } from 'react-router-dom';\nimport Navigation from '../components/Navigation';\nimport Footer from '../components/Footer';\nimport RegistrationForm from '../components/RegistrationForm';\nimport './EventDetail.css';\n\nconst EventDetail = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [showRegistrationForm, setShowRegistrationForm] = useState(false);\n  const [registrationSuccess, setRegistrationSuccess] = useState(false);\n  const [event, setEvent] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const API_BASE = process.env.REACT_APP_API_BASE || 'http://localhost:5000';\n  const [takenTickets, setTakenTickets] = useState(0);\n\n  const demoEvents = [\n    {\n      id: 1,\n      title: \"Tech Innovation Summit 2024\",\n      description: \"Join us for a day of cutting-edge technology discussions, networking, and innovation. Learn from industry experts about the latest trends in AI, blockchain, and cloud computing.\",\n      date: \"Friday, March 15, 2024\",\n      time: \"09:00\",\n      venue: \"Convention Center, Downtown\",\n      seats: \"150 seats available\",\n      totalSeats: 200,\n      takenSeats: 50,\n      category: \"Technology\",\n      price: \"Free\",\n      image: \"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=800&h=400&fit=crop\",\n      heroImage: \"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=1200&h=600&fit=crop\"\n    },\n    {\n      id: 2,\n      title: \"Digital Marketing Workshop\",\n      description: \"Master the art of digital marketing with hands-on workshops covering SEO, social media strategies, content marketing, and analytics. Perfect for marketers looking to enhance their skills.\",\n      date: \"Wednesday, March 20, 2024\",\n      time: \"10:00\",\n      venue: \"Business Center, Midtown\",\n      seats: \"75 seats available\",\n      totalSeats: 100,\n      takenSeats: 25,\n      category: \"Business\",\n      price: \"$99\",\n      image: \"https://images.unsplash.com/photo-1552664730-d307ca884978?w=400&h=250&fit=crop\",\n      heroImage: \"https://images.unsplash.com/photo-1552664730-d307ca884978?w=1200&h=600&fit=crop\"\n    },\n    {\n      id: 3,\n      title: \"Music & Arts Festival\",\n      description: \"Experience a weekend filled with live music, art exhibitions, and creative workshops. Join us for an unforgettable celebration of music and arts featuring local and international artists.\",\n      date: \"Saturday, March 25, 2024\",\n      time: \"12:00\",\n      venue: \"City Park, Central\",\n      seats: \"500 seats available\",\n      totalSeats: 600,\n      takenSeats: 100,\n      category: \"Entertainment\",\n      price: \"$45\",\n      image: \"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=250&fit=crop\",\n      heroImage: \"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=1200&h=600&fit=crop\"\n    },\n    {\n      id: 4,\n      title: \"Startup Pitch Competition\",\n      description: \"Watch innovative startups pitch their ideas to investors and industry experts. This competition showcases the next generation of entrepreneurs and their groundbreaking ideas.\",\n      date: \"Tuesday, March 28, 2024\",\n      time: \"14:00\",\n      venue: \"Innovation Hub, Tech District\",\n      seats: \"200 seats available\",\n      totalSeats: 250,\n      takenSeats: 50,\n      category: \"Business\",\n      price: \"$25\",\n      image: \"https://images.unsplash.com/photo-1559136555-9303baea8ebd?w=400&h=250&fit=crop\",\n      heroImage: \"https://images.unsplash.com/photo-1559136555-9303baea8ebd?w=1200&h=600&fit=crop\"\n    },\n    {\n      id: 5,\n      title: \"AI & Machine Learning Conference\",\n      description: \"Explore the latest developments in artificial intelligence and machine learning. Join leading researchers and practitioners as they share insights into the future of AI technology.\",\n      date: \"Thursday, April 5, 2024\",\n      time: \"09:30\",\n      venue: \"Conference Center, University\",\n      seats: \"300 seats available\",\n      totalSeats: 400,\n      takenSeats: 100,\n      category: \"Technology\",\n      price: \"$150\",\n      image: \"https://images.unsplash.com/photo-1485827404703-89b55fcc595e?w=400&h=250&fit=crop\",\n      heroImage: \"https://images.unsplash.com/photo-1485827404703-89b55fcc595e?w=1200&h=600&fit=crop\"\n    },\n    {\n      id: 6,\n      title: \"Food & Wine Tasting Event\",\n      description: \"Indulge in exquisite food and wine pairings from local restaurants and wineries. Experience culinary excellence with expert sommeliers and renowned chefs.\",\n      date: \"Sunday, April 8, 2024\",\n      time: \"18:00\",\n      venue: \"Grand Hotel, Waterfront\",\n      seats: \"80 seats available\",\n      totalSeats: 100,\n      takenSeats: 20,\n      category: \"Entertainment\",\n      price: \"$85\",\n      image: \"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=400&h=250&fit=crop\",\n      heroImage: \"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=1200&h=600&fit=crop\"\n    }\n  ];\n\n  // Normalize backend event shape to UI shape\n  const normalizeEvent = (raw) => {\n    if (!raw) return null;\n    const start = raw.startDate ? new Date(raw.startDate) : null;\n    const title = raw.title || raw.name || 'Event';\n    const total = typeof raw.capacity === 'number' ? raw.capacity : (raw.totalSeats ?? 0);\n    const taken = Array.isArray(raw.attendees) ? raw.attendees.length : (raw.takenSeats ?? 0);\n    const image = raw.imageUrl || raw.image || 'https://images.unsplash.com/photo-1521737604893-d14cc237f11d?w=800&h=400&fit=crop';\n    const heroImage = image;\n    const category = (raw.categories && raw.categories[0]) || raw.category || 'General';\n    const price = typeof raw.price === 'number' ? raw.price : (raw.price || 'Free');\n    return {\n      id: raw._id || raw.id,\n      title,\n      description: raw.description || '',\n      date: start ? start.toLocaleDateString() : (raw.date || '-'),\n      time: start ? start.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }) : (raw.time || '-'),\n      venue: raw.location || raw.venue || '-',\n      seats: `${Math.max(total - taken, 0)} seats available`,\n      totalSeats: total || 0,\n      takenSeats: taken || 0,\n      category,\n      price,\n      image,\n      heroImage\n    };\n  };\n\n  useEffect(() => {\n    let cancelled = false;\n    async function load() {\n      setLoading(true);\n      setError('');\n      try {\n        // Try backend first\n        const res = await fetch(`${API_BASE}/api/events/${id}`);\n        if (res.ok) {\n          const json = await res.json();\n          const normalized = normalizeEvent(json.item || json);\n          if (!cancelled) setEvent(normalized);\n          // After event loads, fetch participants to compute taken tickets\n          try {\n            const pres = await fetch(`${API_BASE}/api/participants/event/${json._id || json.id || id}`);\n            if (pres.ok) {\n              const pdata = await pres.json();\n              const total = Array.isArray(pdata.items)\n                ? pdata.items.reduce((sum, p) => sum + (typeof p.tickets === 'number' ? p.tickets : 1), 0)\n                : 0;\n              if (!cancelled) setTakenTickets(total);\n            } else if (!cancelled) {\n              setTakenTickets(0);\n            }\n          } catch {\n            if (!cancelled) setTakenTickets(0);\n          }\n        } else {\n          // fallback to demo data for old ids (1..n)\n          const numericId = Number(id);\n          const demo = demoEvents.find(e => e.id === numericId);\n          if (!cancelled) {\n            setEvent(demo || null);\n            setTakenTickets(demo ? demo.takenSeats || 0 : 0);\n          }\n        }\n      } catch (e) {\n        const numericId = Number(id);\n        const demo = demoEvents.find(e => e.id === numericId);\n        if (!cancelled) {\n          if (!demo) setError('Failed to load event');\n          setEvent(demo || null);\n          setTakenTickets(demo ? demo.takenSeats || 0 : 0);\n        }\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    }\n    load();\n    return () => { cancelled = true; };\n  }, [id]);\n\n  // Ensure this hook runs before any conditional return to preserve hook order\n  useEffect(() => {\n    // If navigated from EventsPage with state to open registration and user is logged in\n    let loggedIn = false;\n    try { loggedIn = !!JSON.parse(localStorage.getItem('user')); } catch {}\n    if (location?.state?.openRegistration && loggedIn) {\n      setShowRegistrationForm(true);\n    }\n  }, [location]);\n\n  if (loading) {\n    return (\n      <div className=\"event-detail-page\">\n        <Navigation />\n        <div className=\"not-found\"><h1>Loading event...</h1></div>\n        <Footer />\n      </div>\n    );\n  }\n\n  if (!event) {\n    return (\n      <div className=\"event-detail-page\">\n        <Navigation />\n        <div className=\"not-found\">\n          <h1>Event Not Found</h1>\n          <button onClick={() => navigate('/events')} className=\"btn btn-primary\">\n            Back to Events\n          </button>\n        </div>\n        <Footer />\n      </div>\n    );\n  }\n\n  const getCategoryColor = (category) => {\n    switch (category.toLowerCase()) {\n      case 'technology':\n        return '#667eea';\n      case 'business':\n        return '#f093fb';\n      case 'entertainment':\n        return '#4facfe';\n      default:\n        return '#667eea';\n    }\n  };\n\n  const totalCapacity = event.totalSeats || 0;\n  const taken = typeof takenTickets === 'number' ? takenTickets : (event.takenSeats || 0);\n  const remainingSeats = Math.max(totalCapacity - taken, 0);\n  const seatPercentage = totalCapacity ? (taken / totalCapacity) * 100 : 0;\n\n  const isPastEvent = (() => {\n    // Use original normalized fields plus backend raw if present\n    const now = new Date();\n    // We don't have raw event dates here; normalized date/time is string, so rely on capacity display only.\n    // As a safeguard, rely on backend preventing past registration. Frontend will disable if remainingSeats is 0 and optionally compute from hero if needed.\n    return false;\n  })();\n\n\n  return (\n    <div className=\"event-detail-page\">\n      <Navigation />\n      \n      {/* Hero Section */}\n      <section className=\"event-hero\">\n        <div className=\"event-hero-bg\">\n          <img src={event.heroImage} alt={event.title} />\n          <div className=\"hero-overlay\"></div>\n        </div>\n        \n        <div className=\"event-hero-content\">\n          <div \n            className=\"event-category-tag\"\n            style={{ backgroundColor: getCategoryColor(event.category) }}\n          >\n            {event.category}\n          </div>\n          \n          <h1 className=\"event-title\">{event.title}</h1>\n          \n          <div className=\"event-info-bar\">\n            <div className=\"event-info-item\">\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                <rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"/>\n                <line x1=\"16\" y1=\"2\" x2=\"16\" y2=\"6\"/>\n                <line x1=\"8\" y1=\"2\" x2=\"8\" y2=\"6\"/>\n                <line x1=\"3\" y1=\"10\" x2=\"21\" y2=\"10\"/>\n              </svg>\n              <span>{event.date}</span>\n            </div>\n            \n            <div className=\"event-info-item\">\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                <circle cx=\"12\" cy=\"12\" r=\"10\"/>\n                <polyline points=\"12,6 12,12 16,14\"/>\n              </svg>\n              <span>{event.time}</span>\n            </div>\n            \n            <div className=\"event-info-item\">\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                <path d=\"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z\"/>\n                <circle cx=\"12\" cy=\"10\" r=\"3\"/>\n              </svg>\n              <span>{event.venue}</span>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Back to Events */}\n      <section className=\"back-section\">\n        <div className=\"back-container\">\n          <button onClick={() => navigate('/events')} className=\"back-btn\">\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <polyline points=\"15,18 9,12 15,6\"/>\n            </svg>\n            <span>Back to Events</span>\n          </button>\n        </div>\n      </section>\n\n      {/* Main Content */}\n      <section className=\"event-content\">\n        <div className=\"content-container\">\n          \n          {/* About This Event */}\n          <div className=\"content-section\">\n            <h2 className=\"section-title\">About This Event</h2>\n            <p className=\"section-description\">{event.description}</p>\n          </div>\n\n          {/* Event Details */}\n          <div className=\"content-section\">\n            <h2 className=\"section-title\">Event Details</h2>\n            <div className=\"event-details-grid\">\n              <div className=\"detail-item\">\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                  <rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"/>\n                  <line x1=\"16\" y1=\"2\" x2=\"16\" y2=\"6\"/>\n                  <line x1=\"8\" y1=\"2\" x2=\"8\" y2=\"6\"/>\n                  <line x1=\"3\" y1=\"10\" x2=\"21\" y2=\"10\"/>\n                </svg>\n                <div>\n                  <span className=\"detail-label\">Date:</span>\n                  <span className=\"detail-value\">{event.date}</span>\n                </div>\n              </div>\n              \n              <div className=\"detail-item\">\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                  <path d=\"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z\"/>\n                  <circle cx=\"12\" cy=\"10\" r=\"3\"/>\n                </svg>\n                <div>\n                  <span className=\"detail-label\">Venue:</span>\n                  <span className=\"detail-value\">{event.venue}</span>\n                </div>\n              </div>\n              \n              <div className=\"detail-item\">\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                  <circle cx=\"12\" cy=\"12\" r=\"10\"/>\n                  <polyline points=\"12,6 12,12 16,14\"/>\n                </svg>\n                <div>\n                  <span className=\"detail-label\">Time:</span>\n                  <span className=\"detail-value\">{event.time}</span>\n                </div>\n              </div>\n              \n              <div className=\"detail-item\">\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                  <path d=\"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z\"/>\n                  <line x1=\"7\" y1=\"7\" x2=\"7.01\" y2=\"7\"/>\n                </svg>\n                <div>\n                  <span className=\"detail-label\">Category:</span>\n                  <span className=\"detail-value\">{event.category}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Register for Event */}\n          <div className=\"content-section\">\n            <h2 className=\"section-title\">Register for Event</h2>\n            \n            <div className=\"availability-section\">\n              <div className=\"availability-header\">\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                  <path d=\"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\"/>\n                  <circle cx=\"9\" cy=\"7\" r=\"4\"/>\n                  <path d=\"M23 21v-2a4 4 0 0 0-3-3.87\"/>\n                  <path d=\"M16 3.13a4 4 0 0 1 0 7.75\"/>\n                </svg>\n                <span>Availability</span>\n              </div>\n              \n              <div className=\"availability-bar\">\n                <div className=\"progress-bar\">\n                  <div \n                    className=\"progress-fill\"\n                    style={{ width: `${seatPercentage}%` }}\n                  ></div>\n                </div>\n                <div className=\"availability-info\">\n                  <span className=\"taken-seats\">{event.takenSeats} of {event.totalSeats} seats taken</span>\n                  <span className=\"remaining-seats\">{remainingSeats} seats left</span>\n                </div>\n              </div>\n              \n              <button \n                className=\"register-btn\"\n                onClick={() => {\n                  let loggedIn = false;\n                  try { loggedIn = !!JSON.parse(localStorage.getItem('user')); } catch {}\n                  if (!loggedIn) {\n                    navigate('/login');\n                  } else {\n                    setShowRegistrationForm(true);\n                  }\n                }}\n                disabled={totalCapacity > 0 ? remainingSeats === 0 : false}\n              >\n                Register Now\n              </button>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <Footer />\n      \n      {/* Registration Form Modal */}\n      {showRegistrationForm && (\n        <RegistrationForm \n          event={event}\n          onClose={() => {\n            setShowRegistrationForm(false);\n            setRegistrationSuccess(false);\n          }}\n          onRegister={async (registrationData) => {\n            try {\n              const user = (() => { try { return JSON.parse(localStorage.getItem('user')); } catch { return null; } })();\n              const token = localStorage.getItem('token');\n              if (!user) {\n                navigate('/login');\n                return;\n              }\n              const userId = user._id || user.id;\n              const res = await fetch(`${API_BASE}/api/participants/register`, {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json',\n                  ...(token ? { Authorization: `Bearer ${token}` } : {})\n                },\n                body: JSON.stringify({\n                  eventId: event.id,\n                  userId,\n                  name: registrationData.name,\n                  email: registrationData.email,\n                  phone: registrationData.phone,\n                  numberOfTickets: registrationData.numberOfTickets\n                })\n              });\n              const json = await res.json().catch(() => ({}));\n              if (!res.ok) {\n                throw new Error(json.message || 'Failed to register');\n              }\n              setRegistrationSuccess(true);\n              // Optionally reload the event to update seats\n              try {\n                const refreshed = await fetch(`${API_BASE}/api/events/${event.id}`);\n                if (refreshed.ok) {\n                  const data = await refreshed.json();\n                  const normalized = normalizeEvent(data.item || data);\n                  setEvent(normalized);\n                }\n              } catch {}\n              // Refresh participants tally to update availability\n              try {\n                const pres = await fetch(`${API_BASE}/api/participants/event/${event.id}`);\n                if (pres.ok) {\n                  const pdata = await pres.json();\n                  const total = Array.isArray(pdata.items)\n                    ? pdata.items.reduce((sum, p) => sum + (typeof p.tickets === 'number' ? p.tickets : 1), 0)\n                    : 0;\n                  setTakenTickets(total);\n                }\n              } catch {}\n              setTimeout(() => {\n                setShowRegistrationForm(false);\n                setRegistrationSuccess(false);\n              }, 1500);\n            } catch (e) {\n              alert(e.message);\n            }\n          }}\n        />\n      )}\n      \n      {/* Success Notification */}\n      {registrationSuccess && (\n        <div className=\"notification success\">\n          <p>Registration successful! You'll receive a confirmation email shortly.</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default EventDetail;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}